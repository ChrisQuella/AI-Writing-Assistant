<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å†™ä½œåŠ©æ‰‹</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Markdown æ¸²æŸ“åº“ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* è‡ªå®šä¹‰æ»‘å—æ ·å¼ */
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3B82F6;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            background: #2563EB;
            transform: scale(1.1);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #3B82F6;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: all 0.2s;
        }
        
        input[type="range"]::-moz-range-thumb:hover {
            background: #2563EB;
            transform: scale(1.1);
        }
        
        /* Markdown å†…å®¹æ ·å¼ä¼˜åŒ– */
        .prose {
            color: #374151;
        }
        
        .prose h1, .prose h2, .prose h3 {
            color: #1F2937;
            font-weight: 600;
        }
        
        .prose code {
            background: #F3F4F6;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        .prose pre {
            background: #1F2937;
            color: #F9FAFB;
            padding: 1rem;
            border-radius: 8px;
            overflow-x: auto;
        }
        
        /* å†å²è®°å½•æ–‡æœ¬æˆªæ–­ */
        .line-clamp-2 {
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        .overflow-y-auto::-webkit-scrollbar {
            width: 6px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-track {
            background: #F3F4F6;
            border-radius: 3px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-thumb {
            background: #D1D5DB;
            border-radius: 3px;
        }
        
        .overflow-y-auto::-webkit-scrollbar-thumb:hover {
            background: #9CA3AF;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- é¡¶éƒ¨æ ‡é¢˜ -->
    <header class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600">
                    âœ¨ æ™ºèƒ½å†™ä½œåŠ©æ‰‹
                </h1>
                <p class="text-gray-600 text-sm mt-1">AI é©±åŠ¨çš„æ™ºèƒ½å†™ä½œå·¥å…·ï¼Œè®©åˆ›ä½œæ›´è½»æ¾</p>
            </div>
            <button id="settingsBtn" class="bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition">
                âš™ï¸ è®¾ç½®
            </button>
        </div>
    </header>

    <!-- API Key è®¾ç½®æ¨¡æ€æ¡† -->
    <div id="settingsModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-xl shadow-2xl p-6 max-w-md w-full mx-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">âš™ï¸ API è®¾ç½®</h2>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-2">æ™ºè°± AI API Key</label>
                <input 
                    type="password" 
                    id="apiKeyInput" 
                    class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                    placeholder="è¯·è¾“å…¥æ‚¨çš„ API Key"
                >
                <p class="text-xs text-gray-500 mt-2">
                    è·å– API Key: <a href="https://open.bigmodel.cn/" target="_blank" class="text-blue-600 hover:underline">æ™ºè°± AI å¼€æ”¾å¹³å°</a>
                </p>
            </div>
            <div class="flex gap-3">
                <button id="saveApiKeyBtn" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">
                    ä¿å­˜
                </button>
                <button id="closeModalBtn" class="flex-1 bg-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-300 transition">
                    å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="container mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            <!-- å·¦ä¾§ï¼šå†å²è®°å½•ä¾§è¾¹æ  -->
            <div class="lg:col-span-3 bg-white rounded-xl shadow-lg p-4">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-lg font-semibold text-gray-800">ï¿½ å†å²è®°å½•</h2>
                    <button 
                        id="clearHistoryBtn"
                        class="text-xs text-red-500 hover:text-red-700 transition"
                        title="æ¸…ç©ºæ‰€æœ‰å†å²"
                    >
                        ğŸ—‘ï¸ æ¸…ç©º
                    </button>
                </div>
                <div id="historyList" class="space-y-2 max-h-[calc(100vh-250px)] overflow-y-auto">
                    <p class="text-gray-400 text-center py-8 text-sm">æš‚æ— å†å²è®°å½•</p>
                </div>
            </div>

            <!-- ä¸­é—´ï¼šè¾“å…¥åŒº -->
            <div class="lg:col-span-5 bg-white rounded-xl shadow-lg p-6 space-y-6">
                <div>
                    <h2 class="text-xl font-semibold text-gray-800 mb-4">ğŸ“ è¾“å…¥åŒº</h2>
                    
                    <!-- å†™ä½œæ¨¡å¼é€‰æ‹© -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">å†™ä½œæ¨¡å¼</label>
                        <select id="writingMode" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                            <option value="continue">ğŸ“– æ–‡ç« ç»­å†™</option>
                            <option value="rewrite">âœï¸ å†…å®¹æ”¹å†™</option>
                            <option value="expand">ğŸ“ˆ å†…å®¹æ‰©å±•</option>
                            <option value="summarize">ğŸ“‹ å†…å®¹æ€»ç»“</option>
                            <option value="email">ğŸ“§ é‚®ä»¶æ’°å†™</option>
                            <option value="copywriting">ğŸ’¡ æ–‡æ¡ˆç”Ÿæˆ</option>
                        </select>
                    </div>

                    <!-- è¾“å…¥æ–‡æœ¬æ¡† -->
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">è¾“å…¥å†…å®¹</label>
                        <textarea 
                            id="inputText" 
                            rows="10" 
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition resize-none"
                            placeholder="è¯·è¾“å…¥æ‚¨çš„å†…å®¹..."
                        ></textarea>
                    </div>

                    <!-- é«˜çº§è®¾ç½®é¢æ¿ -->
                    <div class="mb-4 border border-gray-200 rounded-lg overflow-hidden">
                        <button 
                            id="advancedToggle"
                            class="w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 transition flex justify-between items-center text-left"
                        >
                            <span class="font-medium text-gray-700">âš™ï¸ é«˜çº§è®¾ç½®</span>
                            <svg id="toggleIcon" class="w-5 h-5 text-gray-500 transform transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                            </svg>
                        </button>
                        
                        <div id="advancedPanel" class="hidden p-4 bg-white space-y-4">
                            <!-- åˆ›æ„åº¦æ»‘å— -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-gray-700">åˆ›æ„åº¦ (Temperature)</label>
                                    <span id="tempValue" class="text-blue-600 font-semibold text-sm">0.7</span>
                                </div>
                                <input 
                                    type="range" 
                                    id="temperature" 
                                    min="0" 
                                    max="1" 
                                    step="0.1" 
                                    value="0.7"
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                >
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>ä¿å®ˆ (0.0)</span>
                                    <span>å¹³è¡¡ (0.5)</span>
                                    <span>åˆ›æ„ (1.0)</span>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">
                                    ğŸ’¡ è¾ƒä½å€¼è¾“å‡ºæ›´ç¡®å®šï¼Œè¾ƒé«˜å€¼è¾“å‡ºæ›´æœ‰åˆ›æ„
                                </p>
                            </div>

                            <!-- è¾“å‡ºé•¿åº¦æ»‘å— -->
                            <div>
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-gray-700">è¾“å‡ºé•¿åº¦ (Max Tokens)</label>
                                    <span id="maxTokensValue" class="text-blue-600 font-semibold text-sm">1500</span>
                                </div>
                                <input 
                                    type="range" 
                                    id="maxTokens" 
                                    min="100" 
                                    max="2000" 
                                    step="100" 
                                    value="1500"
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                >
                                <div class="flex justify-between text-xs text-gray-500 mt-1">
                                    <span>çŸ­ (100)</span>
                                    <span>ä¸­ (1000)</span>
                                    <span>é•¿ (2000)</span>
                                </div>
                                <p class="text-xs text-gray-500 mt-2">
                                    ğŸ“ æ§åˆ¶ç”Ÿæˆå†…å®¹çš„æœ€å¤§é•¿åº¦ï¼ˆçº¦ç­‰äºå­—æ•°ï¼‰
                                </p>
                            </div>

                            <!-- é¢„è®¾æŒ‰é’® -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">å¿«é€Ÿé¢„è®¾</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <button onclick="applyPreset('conservative')" class="px-3 py-2 text-xs bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition">
                                        ğŸ›¡ï¸ ä¿å®ˆ
                                    </button>
                                    <button onclick="applyPreset('balanced')" class="px-3 py-2 text-xs bg-green-50 hover:bg-green-100 text-green-700 rounded-lg transition">
                                        âš–ï¸ å¹³è¡¡
                                    </button>
                                    <button onclick="applyPreset('creative')" class="px-3 py-2 text-xs bg-purple-50 hover:bg-purple-100 text-purple-700 rounded-lg transition">
                                        ğŸ¨ åˆ›æ„
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- æŒ‰é’®åŒº -->
                    <div class="flex gap-3">
                        <button 
                            id="optimizeBtn"
                            class="flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-lg font-medium hover:from-purple-600 hover:to-pink-600 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                        >
                            ğŸ¯ ä¼˜åŒ–æç¤ºè¯
                        </button>
                        <button 
                            id="generateBtn"
                            class="flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-lg font-medium hover:from-blue-600 hover:to-indigo-700 transition transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                        >
                            âœ¨ ç”Ÿæˆå†…å®¹
                        </button>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šç»“æœå±•ç¤ºåŒº -->
            <div class="lg:col-span-4 bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-4">
                    <h2 class="text-xl font-semibold text-gray-800">ğŸ“„ ç”Ÿæˆç»“æœ</h2>
                    <button 
                        id="copyBtn"
                        class="hidden bg-green-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-600 transition transform hover:scale-105"
                    >
                        ğŸ“‹ å¤åˆ¶
                    </button>
                </div>
                
                <div 
                    id="outputArea" 
                    class="min-h-[400px] max-h-[calc(100vh-250px)] overflow-y-auto p-4 bg-gray-50 rounded-lg border border-gray-200 prose prose-sm max-w-none"
                >
                    <p class="text-gray-400 text-center mt-20">ç”Ÿæˆçš„å†…å®¹å°†åœ¨è¿™é‡Œæ˜¾ç¤º...</p>
                </div>

                <!-- å¤åˆ¶æˆåŠŸæç¤º -->
                <div id="copyToast" class="hidden fixed top-20 right-6 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg fade-in">
                    âœ… å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
                </div>
            </div>
        </div>
    </main>

    <script src="main.js"></script>
</body>
</html>
